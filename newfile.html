<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- import CSS -->
    <link rel="stylesheet" href="styles.css" />

    <title>PuppyBowl</title>
  </head>

  <body>
    <!-- form to add new players -->
    <div id="new-player-form"></div>
    <form class="form" action="submit">
      <label>Breed</label>
      <input type="text" name="title" />
      <label>cohortId</label>
      <input type="number" name="date" />
      <label>id</label>
      <input type="number" name="description" />
      <label>imagerUrl</label>
      <input type="text" name="title" />
      <label>name</label>
      <input type="datetime-local" name="date" />
      <label>status</label>
      <input type="enum" name="location" />
      <label>Team Id</label>
      <input type="number" name="description" />
      <button type="submit" name="add-button">Add</button>
    </form>

    <!-- container for all players -->
    <div id="all-players-container">
      <ul id="all-player-table"></ul>
    </div>
    <!-- import JavaScript -->
    <script defer src="script.js">
              const playerContainer = document.getElementById("all-players-container");
      const newPlayerFormContainer = document.getElementById("new-player-form");

      // Add your cohort name to the cohortName variable below, replacing the 'COHORT-NAME' placeholder
      const cohortName = "2308-ACC-PT-WEB-PT-A";
      // Use the APIURL variable for fetch requests
      const APIURL = `https://fsa-puppy-bowl.herokuapp.com/api/${cohortName}/players`;

      const state = {
        players: [],
      };

      /**
       * It fetches all players from the API and returns them
       * @returns An array of objects.
       */
      const fetchAllPlayers = async () => {
        try {
          const response = await fetch(APIURL);
          const json = await response.json();
          const AllPlayers = json.data;
          console.log("inside GET");
          console.log(AllPlayers);
          if (json.error) {
            throw new Error(json.error);
          }
          state.players = AllPlayers;
        } catch (err) {
          console.error("Uh oh, trouble fetching players!", err);
        }
      };

      const fetchSinglePlayer = async (playerId) => {
        try {
          const response = await fetch(APIURL);
          const json = await response.json();
          const playerId = json.data;
          console.log("inside GET");
          console.log(playerId);
          if (json.error) {
            throw new Error(json.error);
          }
        } catch (err) {
          console.error(`Oh no, trouble fetching player #${playerId}!`, err);
        }
      };

      const addNewPlayer = async (playerObj) => {
        try {
        } catch (err) {
          console.error("Oops, something went wrong with adding that player!", err);
        }
      };

      const removePlayer = async (playerId) => {
        try {
        } catch (err) {
          console.error(
            `Whoops, trouble removing player #${playerId} from the roster!`,
            err
          );
        }
      };

      /**
       * It takes an array of player objects, loops through them, and creates a string of HTML for each
       * player, then adds that string to a larger string of HTML that represents all the players.
       *
       * Then it takes that larger string of HTML and adds it to the DOM.
       *
       * It also adds event listeners to the buttons in each player card.
       *
       * The event listeners are for the "See details" and "Remove from roster" buttons.
       *
       * The "See details" button calls the `fetchSinglePlayer` function, which makes a fetch request to the
       * API to get the details for a single player.
       *
       * The "Remove from roster" button calls the `removePlayer` function, which makes a fetch request to
       * the API to remove a player from the roster.
       *
       * The `fetchSinglePlayer` and `removePlayer` functions are defined in the
       * @param playerList - an array of player objects
       * @returns the playerContainerHTML variable.
       */
      const renderAllPlayers = async (playerList) => {
        const table = document.getElementById("all-player-table");
        table.innerHTML;
        try {
          const response = await fetch(APIURL);
        } catch (err) {
          console.error("Uh oh, trouble rendering players!", err);
        }
      };

      /**
       * It renders a form to the DOM, and when the form is submitted, it adds a new player to the database,
       * fetches all players from the database, and renders them to the DOM.
       */
      const renderNewPlayerForm = () => {
        try {
        } catch (err) {
          console.error("Uh oh, trouble rendering the new player form!", err);
        }
      };

      const init = async () => {
        const players = await fetchAllPlayers();
        renderAllPlayers(players);

        renderNewPlayerForm();
      };

      init();
    </script>
  </body>
</html>
